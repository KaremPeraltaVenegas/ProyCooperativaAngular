<div class="d-flex justify-content-between">
  <h3>
    Productor
  </h3>
  <div>
    <button
      type="submit"
      form="mainForm"
      class="btn btn-primary"
      [disabled]="!mainForm.valid"
    >
      Guardar
    </button>
    <button
      type="button"
      [routerLink]="['/productores']"
      class="btn btn-secondary btn-xs ml-2"
    >
      Cancelar
    </button>
  </div>
</div>

<form id="mainForm" [formGroup]="mainForm" (ngSubmit)="onFormSubmit()">
  <div class="form-group">
    <label>
      Nombre
    </label>
    <div>
      <input
        type="text"
        class="form-control"
        formControlName="nombre"
        placeholder="Nombre"
        required
      />
      <span
        class="text-danger"
        *ngIf="
          (mainForm.get('nombre').dirty || mainForm.get('nombre').touched) &&
          mainForm.get('nombre').invalid &&
          mainForm.get('nombre').errors.required
        "
      >
        Este campo es requerido
      </span>
    </div>
  </div>

  <div class="form-group">
    <label>
      Apellido
    </label>
    <div>
      <input
        type="text"
        class="form-control"
        formControlName="apellido"
        placeholder="Apellido"
        required
      />
      <span
        class="text-danger"
        *ngIf="
          (mainForm.get('apellido').dirty ||
            mainForm.get('apellido').touched) &&
          mainForm.get('apellido').invalid &&
          mainForm.get('apellido').errors.required
        "
      >
        Este campo es requerido
      </span>
    </div>
  </div>

  <div class="form-group">
    <label>
      Dirección
    </label>
    <div>
      <input
        type="text"
        class="form-control"
        formControlName="direccion"
        placeholder="Dirección"
      />
    </div>
  </div>

  <div class="form-group">
    <label>
      DNI
    </label>
    <div>
      <input
        type="text"
        class="form-control"
        formControlName="dni"
        placeholder="DNI"
      />
    </div>
  </div>

  <div class="form-group">
    <label>
      Cooperativa
    </label>
    <div>
      <select
        class="form-control"
        formControlName="cooperativa"
        required
        [compareWith]="compareFn"
      >
        <option value="" disabled selected>Seleccione Cooperativa</option>
        <option *ngFor="let coop of cooperativas | async" [ngValue]="coop">{{
          coop.nombre
        }}</option>
      </select>
    </div>
  </div>

  <div class="form-group" *ngIf="mainForm.get('productor').value">
    <label>
      Productor Lider
    </label>
    <div>
      <select
        class="form-control"
        formControlName="productor"
        [compareWith]="compareFn"
      >
        <option value="" disabled selected>Seleccione Prodcutor Lider</option>
        <option *ngFor="let lider of lideres | async" [ngValue]="lider">{{
          lider.nombre
        }}</option>
      </select>
    </div>
  </div>
</form>
